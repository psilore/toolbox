---
name: Tests

run-name: 'ðŸ§ª Running tests for ${{ github.ref }}'

on:
  workflow_call:
    inputs:
      environment:
        description: 'The environment to run tests against (e.g., dev, staging, prod)'
        type: string
        required: false
        default: 'dev'

permissions:
  contents: read
  pull-requests: read
  checks: write

jobs:
  source-protection:
    name: Source protection
    uses: ./.github/workflows/source-protection.yml
    with:
      environment: ${{ inputs.environment }}
      commitlint-config: '.github/commitlint.config.cjs'
      yamllint-config: '.github/.yamllintrc.yml'
  shellcheck:
    name: ShellCheck
    uses: ./.github/workflows/shellcheck.yml
    with:
      severity: 'error'
      shell-type: 'bash'
      environment: ${{ inputs.environment }}
